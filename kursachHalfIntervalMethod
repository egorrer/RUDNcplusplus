#include <iostream>
#include <math.h>
using namespace std;
//Настроить периуд у Син и Кос надо!!!

float halfIntervalMethod(float (*fName)(float), float a, float b, float accLevel)
{
    float c, aVal, bVal, accVal;
    float searchZero(float (*fN)(float), float negPoint, float posPoint, float accL);
    float fcos(float x);
    float fsin(float x);
// здесь работает указатель на функцию
    aVal = (*fName)(a);
    bVal = (*fName)(b);

    cout << "hello\n";
    if(aVal>0 & bVal<0){  // check values' sign
        return searchZero(fName, b, a, accLevel);
    } else if(aVal<0 & bVal>0){
        return searchZero(fName, a, b, accLevel);
    }
    else {
        cout << "Error: The arguments have the same sign";
        return 0;
    }

}

float searchZero(float (*fPointer)(float), float negPoint, float posPoint, float accL)
{
    float testValue, midPoint;
    bool closeEnought(float p, float q, float accLL);

    midPoint=(negPoint+posPoint)/2;
    if(closeEnought(negPoint, posPoint, accL)){
        return midPoint;
    }
// здесь работает указатель на функцию
    testValue = fPointer(midPoint);
    if(testValue>0){
        return searchZero(fPointer, negPoint, midPoint, accL);
    } else if(testValue<0){
        return searchZero(fPointer, midPoint, posPoint, accL);
    }
    return midPoint;
}

bool closeEnought(float p, float q, float accLL){
    if(fabs(p - q) < accLL){
        return 1;
    }
    return 0;
}

float fcos(float x){
cout << "hello, I am cos";
    return cos(x);
}

float fsin(float x){
    return sin(x);
}
// The list of functions can be continued...

int main()
{
    float x, y, z=1000; // input and output values
    float acc=0.001; // accuracy level
    std::string funcName; // function name
    float (*functionPointer)(float x); //function pointer
    float halfIntervalMethod(float (*fName)(float), float a, float b, float accLevel);

    cout << "Enter the function name (sin, cos, etc.):";
    cin >> funcName;
    cout << "Enter two float numbers:";
    cin >> x >> y;
    cout << "Enter the accuracy level (0.01, 0.001, etc.):";
    cin >> acc;
    if ( acc <=0 || acc >= 1 ) {
        cout << "\n Invalid accuracy level \n";
        return 0;
    }
    if ( funcName == "sin" ) {
        functionPointer = fsin;
    } else if ( funcName == "cos" ) {
        functionPointer = fcos;
    } else {
        cout << "There is no such name in my list of functions\n" ;
        return 0;
    }
    cout << "Calculating value for the function " << funcName << "...\n";
    z = (*functionPointer)(x);

//    z = halfIntervalMethod(functionPointer, x, y, acc);

    cout << "Output: " << z;
    return 0;
}

